(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(37)},32:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),s=a(5),l=a.n(s),i=a(6),h=a(7),u=a(8),m=a(11),d=a(9),b=a(12),f=a(14),p="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:k},E=function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},g=function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(f.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},y=(a(32),a(38)),N=function(e){var t=e.changeShelf,a=e.book;return r.a.createElement("select",{value:a.shelf,onChange:function(e){return t(e.target.value,a)}},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None"))},S=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={displayForSearch:[]},a.searchQuery=function(){var e=Object(i.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props.books,""===t){e.next=15;break}return e.prev=2,e.next=5,g(t);case 5:!(r=e.sent)||r.error?a.setState({displayForSearch:[]}):r.map(function(e){return n.map(function(t){return e.id===t.id?e.shelf=t.shelf:e.shelf="none"})}),a.setState({displayForSearch:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:e.next=16;break;case 15:a.setState({displayForSearch:[]});case 16:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.displayForSearch,a=this.props,n=a.query,o=a.changeShelf;return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(y.a,{to:"./",className:"close-search"},"Close"),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:n,onChange:function(t){return e.searchQuery(t.target.value)}}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},t&&t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:void 0===e.imageLinks?"url(https://s7.postimg.cc/shls4dbcb/persons.png)":"url(".concat(e.imageLinks.thumbnail,")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement(N,{book:e,changeShelf:o}))),r.a.createElement("div",{className:"book-title"},e.title),r.a.createElement("div",{className:"book-authors"},e.author)))}))))}}]),t}(r.a.Component),j=a(40),w=function(e){var t=e.books,a=e.title,n=e.changeShelf;return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},t.map(function(e){return e.shelf===a&&r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement(N,{changeShelf:n,book:e}))),r.a.createElement("div",{className:"book-title"},e.title),r.a.createElement("div",{className:"book-authors"},e.author)))}))))},O=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},a.changeShelf=function(e,t){var n=[];E(t,e).then(function(){t.shelf=e,n=a.state.books.filter(function(e){return e.id!==t.id}),a.setState({books:n.concat(t)})})},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(p,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books});case 3:t=e.sent,this.setState({books:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.books;return r.a.createElement("div",{className:"app"},r.a.createElement(j.a,{exact:!0,path:"/",render:function(){return r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",null,r.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),r.a.createElement(w,{title:"currentlyReading",books:t,changeShelf:e.changeShelf}),r.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),r.a.createElement(w,{title:"wantToRead",books:t,changeShelf:e.changeShelf}),r.a.createElement("h2",{className:"bookshelf-title"},"Read"),r.a.createElement(w,{title:"read",books:t,changeShelf:e.changeShelf}))),r.a.createElement("div",{className:"open-search"},r.a.createElement(y.a,{to:"/search"},"Add a book")))}}),r.a.createElement(j.a,{path:"/search",render:function(){return r.a.createElement(S,{books:t,searchQuery:e.searchQuery,changeShelf:e.changeShelf})}}))}}]),t}(r.a.Component),x=(a(36),a(39));c.a.render(r.a.createElement(x.a,{basename:"/"},r.a.createElement(O,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.3ac57558.chunk.js.map